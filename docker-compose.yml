version: "3"
services:
  backend:
  build: ./backend
  ports:
    - "3000:3000"

environment:
  - NODE_ENV=production

healthcheck:
  test: ["CMD", "curl", "-f", "http://localhost:3000/health"]
  interval: 30s
  timeout: 10s
  retries: 5

  frontend:
    build: ./frontend
    ports:
      - "4000:4000"

  environment:
    - NODE_ENV=production

    - API_URL=http://backend:3000

  depends_on:
    backend:
    condition: service_healthy
