build:
  docker:
    backend:
      dockerfile: ./backend/Dockerfile.backend
    frontend:
      dockerfile: ./frontend/Dockerfile.frontend
    nginx:
      dockerfile: ./nginx/Dockerfile.nginx

run:
  web: 
    image: nginx:latest
    command:
      - sh -c 'nginx -g "daemon off;"'

  frontend:
    image: node:18
    command:
      - sh -c 'cd /app && npm run serve:ssr'

  backend:
    image: node:18
    command:
      - sh -c 'cd /app && npm run start:prod'
